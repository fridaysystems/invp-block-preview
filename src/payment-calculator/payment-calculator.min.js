function pcw_only_decimals(element){if(element.value.length>0){var sel=element.selectionStart,old=element.value;element.value=element.value.replace(/[^\-\.0-9]/g,"");var secondPointPos=pcw_get_position(element.value,".",2);-1!=secondPointPos&&(element.value=element.value.slice(0,secondPointPos)+element.value.slice(secondPointPos+1)),pcw_set_caret_position(element.id,element.value!=old?sel-1:sel)}}function pcw_go(){document.getElementById("payment").value=pcw_calculate_payment(document.getElementById("loan_amount").value,document.getElementById("trade").value,document.getElementById("apr").value,document.getElementById("term").value)}function pcw_calculate_payment(amount_financed,trade,apr,term){var periods_per_year=12,payment_factor=0;return payment_factor=0==(apr/=1200)?term:(1-1/Math.pow(1+apr,term))/apr,pcw_format_currency(Math.round((amount_financed-trade)/payment_factor*100)/100)}function pcw_format_currency(num){num=num.toString().replace(/\$|\,/g,""),isNaN(num)&&(num="0"),sign=num==(num=Math.abs(num)),num=Math.floor(100*num+.50000000001),cents=num%100,num=Math.floor(num/100).toString(),cents<10&&(cents="0"+cents);for(var i=0;i<Math.floor((num.length-(1+i))/3);i++)num=num.substring(0,num.length-(4*i+3))+","+num.substring(num.length-(4*i+3));return(sign?"":"-")+"$"+num+"."+cents}function pcw_get_position(str,pat,n){for(var L=str.length,i=-1;n--&&i++<L;)i=str.indexOf(pat,i);return i}function pcw_set_caret_position(elemId,caretPos){var el=document.getElementById(elemId);if(el.value=el.value,null!==el){if(el.createTextRange){var range=el.createTextRange();return range.move("character",caretPos),range.select(),!0}if(el.selectionStart||0===el.selectionStart)return el.focus(),el.setSelectionRange(caretPos,caretPos),!0}}