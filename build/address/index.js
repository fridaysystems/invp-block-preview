(()=>{"use strict";const e=window.wp.blocks,n=window.wp.element,t=window.wp.i18n,l=window.wp.blockEditor,r=window.wp.components,s=window.wp.data,o=window.wp.coreData;(0,e.registerBlockType)("inventory-presser/invp-address",{edit:function({attributes:e,setAttributes:i}){const a=(0,l.useBlockProps)(),c=(d="location",(0,s.useSelect)((e=>{const n=["taxonomy",d,{per_page:-1,hide_empty:!1,context:"view"}],{getEntityRecords:t,isResolving:l}=e(o.store),r=t(...n);return{terms:r,isLoading:l("getEntityRecords",n),hasTerms:!!r?.length}}),[d]));var d;const p=e=>{var n=[],t=document.getElementsByName("locations");if(t)for(var l=0;l<t.length;l++)t[l].checked&&n.push(parseInt(t[l].value));console.log(n),i({locations:n})},m=[],u=[];return c.hasTerms&&c.terms.forEach((t=>{if(m.push((0,n.createElement)("li",null,(0,n.createElement)(r.CheckboxControl,{label:t.name,name:"locations",value:t.id,checked:-1!==e.locations.indexOf(t.id),onChange:p}))),e.locations.length){if(-1===e.locations.indexOf(t.id))return;e.singleLine?u.push((0,n.createElement)("span",null,t.description.replace("\n",", ")," ")):u.push((0,n.createElement)("div",{dangerouslySetInnerHTML:{__html:(l=t.description,(l+"").replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g,"$1<br />$2"))}}))}var l})),0==e.locations.length&&u.push([(0,n.createElement)(r.Placeholder,{label:(0,t.__)("Address","inventory-presser"),instructions:(0,t.__)("Displays addresses from the locations taxonomy. Choose an address in the block settings panel.","inventory-presser")})]),(0,n.createElement)(n.Fragment,null,(0,n.createElement)(l.BlockControls,null),(0,n.createElement)(l.InspectorControls,null,(0,n.createElement)(r.PanelBody,{title:(0,t.__)("Settings","inventory-presser"),initialOpen:!0},(0,n.createElement)(r.PanelRow,null,(0,n.createElement)("fieldset",null,(0,n.createElement)("h3",null,(0,t.__)("Addresses to Show","inventory-presser")),(0,n.createElement)("ul",{className:"locations"},m))),(0,n.createElement)(r.PanelRow,null,(0,n.createElement)("fieldset",null,(0,n.createElement)("h3",null,(0,t.__)("Other Settings","inventory-presser")),(0,n.createElement)(r.CheckboxControl,{label:(0,t.__)("Display on Single Line","inventory-presser"),help:(0,t.__)("Turn on for an inline <span>. Default behavior is a <div> containing line breaks.","inventory-presser"),checked:e.singleLine,onChange:e=>{i({singleLine:e})}}))))),(0,n.createElement)("div",a,u))},save:function(){return null}})})();