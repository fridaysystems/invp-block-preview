!function(){"use strict";var e=window.wp.blocks;function t(){return t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var a in l)Object.prototype.hasOwnProperty.call(l,a)&&(e[a]=l[a])}return e},t.apply(this,arguments)}var l=window.wp.element,a=window.wp.i18n,n=window.wp.blockEditor,r=window.wp.components,o=window.wp.data,c=window.wp.coreData;(0,e.registerBlockType)("create-block/invp-payment-calculator",{edit:function(e){var u;let{attributes:p,setAttributes:i}=e;const m=(0,n.useBlockProps)(),v=(0,o.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[s,_]=(0,c.useEntityProp)("postType",v,"meta");function d(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var a=s[invp_blocks.meta_prefix+"price"],n=e||p.trade,r=t||p.apr,o=l||p.term,c=12,u=0;u=0==(r/=100*c)?o:(1-1/Math.pow(1+r,o))/r;var i=Math.round((a-n)/u*100)/100,m=h(i);return m}function h(e){e=e.toString().replace(/\$|\,/g,""),isNaN(e)&&(e="0");var t=e==(e=Math.abs(e)),l=(e=Math.floor(100*e+.50000000001))%100;e=Math.floor(e/100).toString(),l<10&&(l="0"+l);for(var a=0;a<Math.floor((e.length-(1+a))/3);a++)e=e.substring(0,e.length-(4*a+3))+","+e.substring(e.length-(4*a+3));return(t?"":"-")+"$"+e+"."+l}return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(n.InspectorControls,null,(0,l.createElement)(r.PanelBody,{title:(0,a.__)("Payment Calculator Settings","invp-payment-calculator"),initialOpen:!0},(0,l.createElement)(r.PanelRow,null,(0,l.createElement)("fieldset",null,(0,l.createElement)(r.TextControl,{label:(0,a.__)("Default APR","invp-payment-calculator"),help:(0,a.__)("What annual percentage rate should be pre-filled?","invp-payment-calculator"),value:p.defaultAPR,onChange:e=>{i({defaultAPR:parseFloat(e.replace(/[^0-9\.]+/g,""))})}}))))),(0,l.createElement)(n.BlockControls,null),(0,l.createElement)("div",t({},m,{id:"payment_calculator"}),(0,l.createElement)("ul",null,(0,l.createElement)("li",null,(0,l.createElement)(r.TextControl,{label:(0,a.__)("Cash/trade","invp-payment-calculator"),id:"trade",value:p.trade,onChange:e=>{e=e.replace(/[^0-9\.]+/g,""),i({trade:e}),i({payment:d(e)})}})),(0,l.createElement)("li",null,(0,l.createElement)(r.TextControl,{label:(0,a.__)("APR %*","invp-payment-calculator"),id:"apr",value:null!==(u=p.APR)&&void 0!==u?u:p.defaultAPR,onChange:e=>{e=e.replace(/[^0-9\.]+/g,""),i({APR:e}),i({payment:d(null,e)})}})),(0,l.createElement)("li",null,(0,l.createElement)(r.SelectControl,{label:(0,a.__)("Term","invp-payment-calculator"),id:"term",value:p.defaultTerm,options:[{label:(0,a.__)("12 months","invp-payment-calculator"),value:"12"},{label:(0,a.__)("18 months","invp-payment-calculator"),value:"18"},{label:(0,a.__)("24 months","invp-payment-calculator"),value:"24"},{label:(0,a.__)("30 months","invp-payment-calculator"),value:"30"},{label:(0,a.__)("36 months","invp-payment-calculator"),value:"36"},{label:(0,a.__)("42 months","invp-payment-calculator"),value:"42"},{label:(0,a.__)("48 months","invp-payment-calculator"),value:"48"},{label:(0,a.__)("60 months","invp-payment-calculator"),value:"60"},{label:(0,a.__)("72 months","invp-payment-calculator"),value:"72"},{label:(0,a.__)("84 months","invp-payment-calculator"),value:"84"}]})),(0,l.createElement)("li",null,(0,l.createElement)(r.TextControl,{label:(0,a.__)("Payment","invp-payment-calculator"),id:"payment",value:d,onChange:()=>{i({payment:d()})}}))),(0,l.createElement)("p",null,"* ",p.disclaimer),(0,l.createElement)("input",{type:"hidden",id:"loan_amount",value:s[invp_blocks.meta_prefix+"price"]})))},save:function(){return null}})}();