(()=>{"use strict";const e=window.wp.blocks;function r(){return r=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e},r.apply(this,arguments)}const t=window.wp.element,n=window.wp.i18n,o=window.wp.blockEditor,a=window.wp.components,i=window.wp.data,c=window.wp.coreData;(0,e.registerBlockType)("inventory-presser/invp-carfax-button",{edit:function(){const e=(0,o.useBlockProps)(),l=(0,i.useSelect)((e=>e("core/editor").getCurrentPostType()),[]),[s,p]=(0,c.useEntityProp)("postType",l,"meta"),u=""==s[invp_blocks.meta_prefix+"carfax_url_report"]?"http://www.carfax.com/VehicleHistory/p/Report.cfx?vin="+s[invp_blocks.meta_prefix+"vin"]:s[invp_blocks.meta_prefix+"carfax_url_report"],_=s[invp_blocks.meta_prefix+"carfax_url_icon"],f=function(){const e=(0,i.useSelect)((e=>e("core").getSite()),[]);return e?e.url:null}()+"/wp-content/plugins/inventory-presser/images/show-me-carfax"+("1"==s[invp_blocks.meta_prefix+"carfax_one_owner"]?"-1-owner":"")+".svg",w=""==_?f:_;return invp_blocks.use_carfax_provided_buttons&&""==_?(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.BlockControls,null),(0,t.createElement)(a.Placeholder,r({},e,{label:(0,n.__)("Carfax Button","inventory-presser"),instructions:(0,n.__)("No button URL saved for this vehicle. The site is configured to use Carfax-provided buttons at Vehicles â†’ Options.","inventory-presser")}),(0,t.createElement)(a.TextControl,{label:(0,n.__)("Carfax Button URL","inventory-presser"),tagName:"p",onChange:e=>{p({...s,[invp_blocks.meta_prefix+"carfax_url_icon"]:e})},value:_}))):(0,t.createElement)(t.Fragment,null,(0,t.createElement)(o.BlockControls,null),(0,t.createElement)("div",r({className:"carfax-wrapper"},e),(0,t.createElement)("a",{href:u,target:"_blank",rel:"noopener noreferrer"},(0,t.createElement)("img",{src:w,alt:(0,n.__)("SHOW ME THE CARFAX","inventory-presser")}))))},save:function(){return null}})})();